<script>
// FrameBypass navigation event handlers
document.addEventListener("click", (e) => {
    if (frameElement && document.activeElement && document.activeElement.href) {
        e.preventDefault();
        frameElement.contentWindow.parent.postMessage(
            {
                type: "navigate",
                url: document.activeElement.href,
            },
            "*",
        );
    }
});
document.addEventListener("submit", (e) => {
    if (
        frameElement &&
        document.activeElement &&
        document.activeElement.form &&
        document.activeElement.form.action
    ) {
        e.preventDefault();
        const form = document.activeElement.form;
        const formData = new FormData(form);

        if (form.method === "post") {
            frameElement.contentWindow.parent.postMessage(
                {
                    type: "navigate",
                    url: form.action,
                    method: "post",
                    body: formData,
                },
                "*",
            );
        } else {
            const params = new URLSearchParams(formData);
            frameElement.contentWindow.parent.postMessage(
                {
                    type: "navigate",
                    url: `${form.action}?${params.toString()}`,
                },
                "*",
            );
        }
    }
});
</script>